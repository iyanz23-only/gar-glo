<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Belanja Interaktif</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #5ee7df, #b490ca);
            color: #333;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 800px;
            background: #fff;
            margin: 40px auto;
            border-radius: 12px;
            padding: 20px 30px;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
        }

        h1 {
            text-align: center;
            color: #444;
        }

        .input-form {
            margin-bottom: 25px;
        }

        .input-form input {
            padding: 10px;
            margin: 5px;
            width: 30%;
            border: 1px solid #ccc;
            border-radius: 8px;
        }

        .input-form button {
            padding: 10px 20px;
            background: #5c6bc0;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        .input-form button:hover {
            background: #3949ab;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            text-align: center;
            padding: 10px;
            border-bottom: 1px solid #ccc;
        }

        .delete-btn {
            background-color: #f44336;
            color: white;
            padding: 5px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }

        .delete-btn:hover {
            background-color: #c62828;
        }

        tfoot td {
            font-weight: bold;
            background-color: #e8eaf6;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Kalkulator Belanja</h1>

        <div class="input-form">
            <h2>Tambah Barang</h2>
            <input type="text" id="nama-barang" placeholder="Nama Barang">
            <input type="number" id="harga-barang" placeholder="Harga Satuan (Rp)" min="0">
            <input type="number" id="jumlah-barang" placeholder="Jumlah" min="1">
            <button onclick="tambahBarang()">Tambah ke Daftar</button>
        </div>

        <div class="daftar-belanja">
            <h2>Daftar Belanja Anda</h2>
            <table>
                <thead>
                    <tr>
                        <th>Barang</th>
                        <th>Harga Satuan</th>
                        <th>Jumlah</th>
                        <th>Subtotal</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody id="rincian-belanja"></tbody>
                <tfoot>
                    <tr>
                        <td colspan="3"><strong>Total Keseluruhan</strong></td>
                        <td id="total-keseluruhan">Rp 0,00</td>
                        <td></td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>

    <script>
        // Array untuk menyimpan semua item belanja
        let daftarBelanja = [];

        // Fungsi untuk format angka ke mata uang Rupiah
        function formatRupiah(angka) {
            return new Intl.NumberFormat('id-ID', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 2
            }).format(angka);
        }

        // Fungsi utama untuk menambahkan barang ke daftar
        function tambahBarang() {
            const namaInput = document.getElementById('nama-barang');
            const hargaInput = document.getElementById('harga-barang');
            const jumlahInput = document.getElementById('jumlah-barang');

            const nama = namaInput.value.trim();
            const harga = parseFloat(hargaInput.value);
            const jumlah = parseInt(jumlahInput.value);

            // Validasi input
            if (nama === "" || isNaN(harga) || isNaN(jumlah) || harga <= 0 || jumlah <= 0) {
                alert("Mohon masukkan nama, harga (angka positif), dan jumlah (minimal 1) yang valid.");
                return;
            }

            // Buat objek barang baru
            const barangBaru = {
                id: Date.now(),
                nama: nama,
                harga: harga,
                jumlah: jumlah,
                subtotal: harga * jumlah
            };

            // Tambahkan ke array
            daftarBelanja.push(barangBaru);

            // Perbarui tampilan dan reset form
            renderDaftarBelanja();
            
            namaInput.value = '';
            hargaInput.value = '';
            jumlahInput.value = '';
            namaInput.focus();
        }

        // Fungsi untuk menghapus barang
        function hapusBarang(idBarang) {
            daftarBelanja = daftarBelanja.filter(item => item.id !== idBarang);
            renderDaftarBelanja();
        }

        // Fungsi untuk memperbarui tampilan daftar belanja dan total
        function renderDaftarBelanja() {
            const rincianBody = document.getElementById('rincian-belanja');
            const totalKeseluruhanElement = document.getElementById('total-keseluruhan');
            let totalBelanja = 0;

            rincianBody.innerHTML = '';

            daftarBelanja.forEach(item => {
                const row = rincianBody.insertRow();
                row.insertCell().textContent = item.nama;
                row.insertCell().textContent = formatRupiah(item.harga);
                row.insertCell().textContent = item.jumlah;
                row.insertCell().textContent = formatRupiah(item.subtotal);
                
                const aksiCell = row.insertCell();
                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = 'Hapus';
                deleteBtn.className = 'delete-btn';
                deleteBtn.onclick = () => hapusBarang(item.id);
                aksiCell.appendChild(deleteBtn);

                totalBelanja += item.subtotal;
            });

            totalKeseluruhanElement.textContent = formatRupiah(totalBelanja);
        }

        // Jalankan fungsi render saat halaman dimuat
        document.addEventListener('DOMContentLoaded', renderDaftarBelanja);
    </script>
</body>
</html>
